<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN" lang="zh-CN">
	<head>





		<script type="text/javascript" async
			src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
		</script>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta name="author" content="CHAI" />
		<title>
			
				
				Python学习手册 笔记（第五章）
			
		</title>

		<link rel="shortcut icon" href="/image/favicon.ico" />
		<link href="/feed/" rel="alternate" title="CHAI" type="application/atom+xml" />
		<link rel="stylesheet" href="/media/css/style.css" />
		<link rel="stylesheet" href="/media/css/highlight.css" />
		<script type="text/javascript" src="/media/js/jquery-1.7.1.min.js"></script>
	</head>

	<body>
		<div id="container">
		<div id="main" role="main">

		<header>
			<h1>
				Python学习手册 笔记（第五章）
			</h1>
		</header>

		<nav>
			<span><a title="网站首页" class="" href="/">首页</a></span>
			<span><a title="文章分类" class="" href="/categories/">分类</a></span>
			<span><a title="标签索引" class="" href="/tags/">标签</a></span>
			<span><a title="留言交流" class="" href="/guestbook/">留言</a></span>
			<span><a title="关于站长" class="" href="/about/">关于</a></span>
        </nav>

        <article class="content">
			<section class="meta">
<span class="time">
    <time datetime="2016-11-09">2016-11-09</time>
</span>

 |
<span class="categories">
  分类
  
  <a href="/categories/#Python" title="Python">Python</a>&nbsp;
  
</span>


 |
<span class="tags">
  标签
  
  <a href="/tags/#Python学习手册" title="Python学习手册">Python学习手册</a>&nbsp;
  
</span>

</section>
<section class="post">
<h2 id="第5章-数字">第5章 数字</h2>

<h3 id="数字常量">数字常量</h3>

<ul>
  <li>八进制：0o177；十六进制：0x9ff；二进制：0b0101010</li>
  <li>复数常量：3+4j</li>
  <li>浮点数：和c语言中的双精度一样实现</li>
  <li>内置函数hex(I)、oct(I)和bin(I)把一个整数准啊还为这三种进制表示的字符串，int(str, base)把给定的进制的字符串转化为整数</li>
  <li>complex(real, imag)创建复数</li>
</ul>

<h3 id="内置数字工具和扩展">内置数字工具和扩展</h3>

<ul>
  <li>表达式操作符：+、-、*、／、»、**、&amp;</li>
  <li>内置数学函数：pow、abs、round、int、hex、bin</li>
  <li>公用模块：random、math</li>
</ul>

<h3 id="python表达式操作符">python表达式操作符</h3>

<table>
  <thead>
    <tr>
      <th style="text-align: left">操作符</th>
      <th style="text-align: left">描述</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">yield x</td>
      <td style="text-align: left">生成器函数发送协议</td>
    </tr>
    <tr>
      <td style="text-align: left">lambda args: expression</td>
      <td style="text-align: left">生成匿名函数</td>
    </tr>
    <tr>
      <td style="text-align: left">x if y else z</td>
      <td style="text-align: left">三元选择表达式</td>
    </tr>
    <tr>
      <td style="text-align: left">x or y</td>
      <td style="text-align: left">逻辑或（只有x假才会计算y）</td>
    </tr>
    <tr>
      <td style="text-align: left">x and y</td>
      <td style="text-align: left">逻辑与（只有x真才会计算y）</td>
    </tr>
    <tr>
      <td style="text-align: left">x in y, x not in y</td>
      <td style="text-align: left">成员关系（可迭代对象、集合）</td>
    </tr>
    <tr>
      <td style="text-align: left">x is y, x is not y</td>
      <td style="text-align: left">对象实体测试</td>
    </tr>
    <tr>
      <td style="text-align: left">x &lt; y, x &lt;= y, x &gt; y, x &gt;= y, x == y, x != y</td>
      <td style="text-align: left">大小比较，集合比较</td>
    </tr>
    <tr>
      <td style="text-align: left">x ^ y</td>
      <td style="text-align: left">位异或，集合对称差</td>
    </tr>
    <tr>
      <td style="text-align: left">x &amp; y</td>
      <td style="text-align: left">位与，集合交集</td>
    </tr>
    <tr>
      <td style="text-align: left">x « y, x » y</td>
      <td style="text-align: left">左移或右移y位</td>
    </tr>
    <tr>
      <td style="text-align: left">x + y, x - y</td>
      <td style="text-align: left">加法/合并，减法/差集</td>
    </tr>
    <tr>
      <td style="text-align: left">x * y, x % y, x / y, x // y</td>
      <td style="text-align: left">乘法/重复，余数/格式化，除法：真除法或floor除法</td>
    </tr>
    <tr>
      <td style="text-align: left">-x, +x</td>
      <td style="text-align: left">一元减法，识别</td>
    </tr>
    <tr>
      <td style="text-align: left">~x</td>
      <td style="text-align: left">按位取补</td>
    </tr>
    <tr>
      <td style="text-align: left">x ** y</td>
      <td style="text-align: left">幂运算</td>
    </tr>
    <tr>
      <td style="text-align: left">x[i]</td>
      <td style="text-align: left">索引</td>
    </tr>
    <tr>
      <td style="text-align: left">x[i:j:k]</td>
      <td style="text-align: left">分片</td>
    </tr>
    <tr>
      <td style="text-align: left">x(…)</td>
      <td style="text-align: left">调用</td>
    </tr>
    <tr>
      <td style="text-align: left">x.attr</td>
      <td style="text-align: left">属性引用</td>
    </tr>
    <tr>
      <td style="text-align: left">(…)</td>
      <td style="text-align: left">元组</td>
    </tr>
    <tr>
      <td style="text-align: left">[…]</td>
      <td style="text-align: left">列表</td>
    </tr>
    <tr>
      <td style="text-align: left">{…}</td>
      <td style="text-align: left">字典、集合</td>
    </tr>
  </tbody>
</table>

<ul>
  <li>floor除法表达式(X // Y)总会向下取整</li>
  <li>X &lt; Y &lt; Z等于X &lt; Y and Y &lt; Z</li>
</ul>

<h3 id="混合类型自动升级">混合类型自动升级</h3>

<ul>
  <li>在混合类型的表达式，python将被操作的对象转换为其中最复杂的操作对象的类型。整数比浮点数简单，浮点数比复数简单。</li>
  <li>手动调用内置函数来强制转换类型</li>
</ul>

<h3 id="变量和基本的表达式">变量和基本的表达式</h3>

<ul>
  <li>python中，变量不需要预声明，但是使用前，至少赋一次值</li>
</ul>

<h3 id="数字显示的格式">数字显示的格式</h3>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="s">'</span><span class="si">%</span><span class="s">e'</span> <span class="o">%</span> <span class="n">num</span> <span class="c"># '3.333333e-001'</span>
<span class="s">'</span><span class="si">%4.2</span><span class="s">f'</span> <span class="o">%</span> <span class="n">num</span> <span class="c"># '0.33'</span>
<span class="s">'{0:4.2f}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="c"># '0.33'</span></code></pre></figure>

<h3 id="比较一般的和连续的">比较：一般的和连续的</h3>

<ul>
  <li>str和repr显示格式：repr(默认的交互模式回显)产生的结果好像他们是代码；str转变为一种对用户更加友好的格式；str用于一般用途，repr用于额外细节；str也是字符串数据类型的名字</li>
  <li>python允许多个比较连续执行，这样运行速度略快</li>
</ul>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">X</span> <span class="o">&lt;</span> <span class="n">Y</span> <span class="o">&gt;</span> <span class="n">Z</span> <span class="c"># 等于X &lt; Y and Y &gt; Z</span>
<span class="mi">1</span> <span class="o">==</span> <span class="mi">2</span> <span class="o">&lt;</span> <span class="mi">3</span> <span class="c"># 等于1 == 2 and 2 &lt; 3</span></code></pre></figure>

<h3 id="除法传统除法floor除法和真除法">除法：传统除法、Floor除法和真除法</h3>

<ul>
  <li>/真除法：不管操作数的类型，返回包含任何余数的一个浮点结果</li>
  <li>//Floor除法：向下取整，如果操作数包含浮点数，返回浮点数</li>
</ul>

<h3 id="floor除法vs截断除法">Floor除法VS截断除法</h3>

<ul>
  <li>向下取整</li>
</ul>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">math</span>
<span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="mf">2.5</span><span class="p">)</span> <span class="c"># 2</span>
<span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="o">-</span><span class="mf">2.5</span><span class="p">)</span> <span class="c"># -3</span>
<span class="n">math</span><span class="o">.</span><span class="n">trunc</span><span class="p">(</span><span class="mf">2.5</span><span class="p">)</span> <span class="c"># 2</span>
<span class="n">math</span><span class="o">.</span><span class="n">trunc</span><span class="p">(</span><span class="o">-</span><span class="mf">2.5</span><span class="p">)</span> <span class="c"># -2</span></code></pre></figure>

<h3 id="十六进制八进制和二进制">十六进制、八进制和二进制</h3>

<ul>
  <li>把整数转换为其他进制的字符串</li>
</ul>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="nb">oct</span><span class="p">(</span><span class="mi">64</span><span class="p">),</span> <span class="nb">hex</span><span class="p">(</span><span class="mi">64</span><span class="p">),</span> <span class="nb">bin</span><span class="p">(</span><span class="mi">64</span><span class="p">)</span> <span class="c"># ('0o100', '0x40', '0b1000000')</span></code></pre></figure>

<ul>
  <li>将一个数字的字符串变换为一个整数，第二个参数确定进制</li>
</ul>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="nb">int</span><span class="p">(</span><span class="s">'64'</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="s">'100'</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="s">'40'</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="s">'1000000'</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="c"># (64, 64, 64, 64)</span></code></pre></figure>

<ul>
  <li>eval函数，会把字符串作为python代码，但会运行的慢</li>
</ul>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="nb">eval</span><span class="p">(</span><span class="s">'64'</span><span class="p">),</span> <span class="nb">eval</span><span class="p">(</span><span class="s">'0o100'</span><span class="p">),</span> <span class="nb">eval</span><span class="p">(</span><span class="s">'0x40'</span><span class="p">),</span> <span class="nb">eval</span><span class="p">(</span><span class="s">'0b1000000'</span><span class="p">)</span></code></pre></figure>

<h3 id="其他的内置数学工具">其他的内置数学工具</h3>

<ul>
  <li>random模块，可以提供0-1间的任意浮点数，选择2个数字间的任意整数，在一个序列中任意挑选一项</li>
</ul>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">random</span>
<span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="c"># 0-1任意浮点数</span>
<span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="c"># 1-10间任意整数</span>
<span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s">'Life of Brian'</span><span class="p">,</span> <span class="s">'Holy Grail'</span><span class="p">,</span> <span class="s">'Meaning of Life'</span><span class="p">])</span></code></pre></figure>

<h3 id="小数对象">小数对象</h3>

<ul>
  <li>浮点数缺乏精确性</li>
</ul>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.1</span> <span class="o">-</span> <span class="mf">0.3</span> <span class="c"># 5.551115123125783e-17</span></code></pre></figure>

<ul>
  <li>小数对象：通过导入的模块调用函数后创建，有固定的位数和小数点，因此有固定的精度</li>
</ul>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">decimal</span>
<span class="n">Decimal</span><span class="p">(</span><span class="s">'0.1'</span><span class="p">)</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="s">'0.1'</span><span class="p">)</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="s">'0.1'</span><span class="p">)</span> <span class="o">-</span> <span class="n">Decimal</span><span class="p">(</span><span class="s">'0.3'</span><span class="p">)</span> <span class="c"># Decimal('0.0')</span></code></pre></figure>

<p>注释：python会自动升级为小数位数最多的</p>

<h3 id="设置全局精度">设置全局精度</h3>

<ul>
  <li>decimal模块可以设置所有小数数值的精度、设置错误处理</li>
</ul>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">decimal</span>
<span class="n">decimal</span><span class="o">.</span><span class="n">getcontext</span><span class="p">()</span><span class="o">.</span><span class="n">prec</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span> <span class="c"># Decimal('0.1429')</span></code></pre></figure>

<h3 id="小数上下文管理器">小数上下文管理器</h3>

<ul>
  <li>可以使用上下文管理器，设置临时精度。语句退出后精度重新设置为初始值</li>
</ul>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">with</span> <span class="n">decimal</span><span class="o">.</span><span class="n">localcontext</span><span class="p">()</span> <span class="k">as</span> <span class="n">ctx</span><span class="p">:</span>
	<span class="n">ctx</span><span class="o">.</span><span class="n">prec</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="s">'1.00'</span><span class="p">)</span> <span class="o">/</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="s">'3.00'</span><span class="p">)</span> <span class="c"># Decimal('0,33')</span></code></pre></figure>

<h3 id="分数类型">分数类型</h3>

<ul>
  <li>分数，避免了浮点数的不精确和局限性</li>
</ul>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">fractions</span> <span class="kn">import</span> <span class="n">Fraction</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">Fraction</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">Fraction</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="n">x</span> <span class="c"># Fraction(1, 3)</span>
<span class="n">y</span> <span class="c"># Fraction(2, 3)</span>
<span class="k">print</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="c"># 2/3</span>
<span class="n">Fraction</span><span class="p">(</span><span class="s">'.25'</span><span class="p">)</span> <span class="c"># Fraction(1, 4)</span>
<span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="c"># Fraction(1, 1)</span>
<span class="n">Fraction</span><span class="p">(</span><span class="s">'.25'</span><span class="p">)</span> <span class="o">+</span> <span class="n">Fraction</span><span class="p">(</span><span class="s">'1.25'</span><span class="p">)</span> <span class="c"># Fraction(3, 2)</span>
<span class="n">Fraction</span><span class="o">.</span><span class="n">from_float</span><span class="p">(</span><span class="mf">1.75</span><span class="p">)</span></code></pre></figure>

<h3 id="集合">集合</h3>

<ul>
  <li>集合是无序的、唯一的、不可改变的，建立时会排序</li>
</ul>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="nb">set</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span> <span class="c"># {1, 2, 3, 4}</span>
<span class="nb">set</span><span class="p">(</span><span class="s">'spam'</span><span class="p">)</span> <span class="c"># {'a', 'p', 's', 'm'}</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">s1</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">}</span>
<span class="n">s1</span> <span class="o">&amp;</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">}</span> <span class="c"># {1, 3}</span>
<span class="n">s1</span> <span class="o">|</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">}</span> <span class="c"># {1, 2, 3, 4, 5, 6}</span>
<span class="n">s1</span> <span class="o">-</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">}</span> <span class="c"># {2}</span>
<span class="n">s1</span> <span class="o">&gt;</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">}</span> <span class="c"># True</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">}</span><span class="o">.</span><span class="n">union</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span> <span class="c"># {1, 2, 3, 4}</span>
<span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">}</span><span class="o">.</span><span class="n">union</span><span class="p">({</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">})</span> <span class="c"># {1, 2, 3, 4}</span>
<span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">}</span><span class="o">.</span><span class="n">intersection</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span> <span class="c"># {1, 3}</span>
<span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">}</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span> <span class="c"># True</span></code></pre></figure>

<h3 id="不可变限制和冻结集合">不可变限制和冻结集合</h3>

<ul>
  <li>列表和字典不能嵌入集合，元组可以嵌入</li>
</ul>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">s</span> <span class="o">=</span> <span class="p">{</span><span class="mf">1.23</span><span class="p">}</span>
<span class="n">s</span><span class="o">.</span><span class="n">add</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span> <span class="c"># TypeError: unhashable type: 'list'</span>
<span class="n">s</span><span class="o">.</span><span class="n">add</span><span class="p">({</span><span class="s">'a'</span><span class="p">:</span><span class="mi">1</span><span class="p">})</span> <span class="c"># TypeError: unhashable type: 'dict'</span>
<span class="n">s</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="n">s</span> <span class="c"># {1.23, (1, 2, 3)}</span></code></pre></figure>

<h3 id="为什么使用集合">为什么使用集合</h3>

<ul>
  <li>集合可以把重复项从其他集合中过滤掉</li>
</ul>

<h3 id="数字扩展">数字扩展</h3>

<ul>
  <li>Numpy高级数学编程工具：矩阵、向量等计算</li>
  <li>SciPy</li>
</ul>

</section>
<section align="right">
<br/>
<span>
	<a  href="/Python-Learn-chapter4/" class="pageNav"  >上一篇</a>
	&nbsp;&nbsp;&nbsp;
	<a  href="/Python-Learn-chapter6/" class="pageNav"  >下一篇</a>
</span>
</section>

        </article>

		</div>
		</div>
	</body>
</html>
